---
title: Bắt đầu Nhanh
---

Hướng dẫn này sẽ nhanh chóng hướng dẫn bạn cách khởi tạo, tạo và triển khai subgraph của bạn trên:

- **Subgraph Studio** - chỉ được sử dụng cho các subgraph lập chỉ mục **Mạng chính Ethereum**
- **Dịch vụ được Lưu trữ** - được sử dụng cho các subgraph lập chỉ mục **các mạng khác** bên ngoài mạng chính Ethereum (ví dụ: Binance, Matic, v.v.)

## Subgraph Studio

### 1. Cài đặt Graph CLI

Graph CLI được viết bằng JavaScript và bạn sẽ cần phải cài đặt `npm` hoặc `yarn` để sử dụng nó.

```sh
# NPM
$ npm install -g @graphprotocol/graph-cli

# Yarn
$ yarn global add @graphprotocol/graph-cli
```

### 2. Khởi tạo Subgraph của bạn

- Khởi tạo subgraph của bạn từ một hợp đồng hiện có.

```sh
graph init --studio <SUBGRAPH_SLUG>
```

- Slug subgraph của bạn là một mã định danh cho subgraph của bạn. Công cụ CLI sẽ hướng dẫn bạn các bước để tạo một subgraph, chẳng hạn như địa chỉ hợp đồng, mạng, v. v. như bạn có thể thấy trong ảnh chụp màn hình bên dưới.

![Subgraph command](/img/Subgraph-Slug.png)

### 3. Viết Subgraph của bạn

Các lệnh trước đó tạo một subgraph giàn giáo mà bạn có thể sử dụng làm điểm bắt đầu để xây dựng subgraph của mình. Khi thực hiện các thay đổi đối với subgraph, bạn sẽ chủ yếu làm việc với ba tệp:

- Tệp kê khai (subgraph.yaml) - Tệp kê khai xác định nguồn dữ liệu mà các subgraph của bạn sẽ lập chỉ mục.
- Lược đồ (schema.graphql) - Lược đồ GraphQL xác định dữ liệu nào bạn muốn lấy từ subgraph.
- Ánh xạ AssemblyScript (mapping.ts) - Đây là mã dịch dữ liệu từ các nguồn dữ liệu của bạn sang các thực thể được xác định trong lược đồ.

Để biết thêm thông tin về cách viết subgraph của bạn, hãy xem [Tạo một Subgraph ](/developer/create-subgraph-hosted).

### 4. Deploy to the Subgraph Studio

- Go to the Subgraph Studio [https://thegraph.com/studio/](https://thegraph.com/studio/) and connect your wallet.
- Click "Create" and enter the subgraph slug you used in step 2.
- Run these commands in the subgraph folder

```sh
$ graph codegen
$ graph build
```

- Authenticate and deploy your subgraph. The deploy key can be found on the Subgraph page in Subgraph Studio.

```sh
$ graph auth --studio <DEPLOY_KEY>
$ graph deploy --studio <SUBGRAPH_SLUG>
```

- You will be asked for a version label. It's strongly recommended to use the following conventions for naming your versions. Example: `0.0.1`, `v1`, `version1`

### 5. Check your logs

The logs should tell you if there are any errors. If your subgraph is failing, you can query the subgraph health by using the [GraphiQL Playground](https://graphiql-online.com/). Use [this endpoint](https://api.thegraph.com/index-node/graphql). Note that you can leverage the query below and input your deployment ID for your subgraph. In this case, `Qm...` is the deployment ID (which can be located on the Subgraph page under **Details**). The query below will tell you when a subgraph fails so you can debug accordingly:

```sh
{
  indexingStatuses(subgraphs: ["Qm..."]) {
    node
    synced
    health
    fatalError {
      message
      block {
        number
        hash
      }
      handler
    }
    nonFatalErrors {
      message
      block {
        number
        hash
      }
      handler
    }
    chains {
      network
      chainHeadBlock {
        number
      }
      earliestBlock {
        number
      }
      latestBlock {
        number
      }
      lastHealthyBlock {
        number
      }
    }
    entityCount
  }
}
```

### 6. Query your Subgraph

You can now query your subgraph by following [these instructions](/developer/query-the-graph). You can query from your dapp if you don't have your API key via the free, rate limited temporary query URL that can be used for development and staging. You can read the additional instructions for how to query a subgraph from a frontend application [here](/developer/querying-from-your-app).

## Hosted Service

### 1. Cài đặt Graph CLI

"The Graph CLI is an npm package and you will need `npm` or `yarn` installed to use it.

```sh
# NPM
$ npm install -g @graphprotocol/graph-cli

# Yarn
$ yarn global add @graphprotocol/graph-cli
```

### 2. Khởi tạo Subgraph của bạn

- Khởi tạo subgraph của bạn từ một hợp đồng hiện có.

```sh
$ graph init --product hosted-service --from-contract <Address>
```

- You will be asked for a subgraph name. The format is `<Github>/<Subgraph Name>`. Ex: `graphprotocol/examplesubgraph`

- If you'd like to initialize from an example, run the command below:

```sh
$ graph init --product hosted-service --from-example
```

- In the case of the example, the subgraph is based on the Gravity contract by Dani Grant that manages user avatars and emits `NewGravatar` or `UpdateGravatar` events whenever avatars are created or updated.

### 3. Viết Subgraph của bạn

The previous command will have created a scaffold from where you can build your subgraph. When making changes to the subgraph, you will mainly work with three files:

- Manifest (subgraph.yaml) - The manifest defines what datasources your subgraph will index
- Schema (schema.graphql) - The GraphQL schema define what data you wish to retrieve from the subgraph
- AssemblyScript Mappings (mapping.ts) - This is the code that translates data from your datasources to the entities defined in the schema

Để biết thêm thông tin về cách viết subgraph của bạn, hãy xem [Tạo một Subgraph ](/developer/create-subgraph-hosted).

### 4. Deploy your Subgraph

- Sign into the [Hosted Service](https://thegraph.com/hosted-service/) using your github account
- Click Add Subgraph and fill out the required information. Use the same subgraph name as in step 2.
- Run codegen in the subgraph folder

```sh
 # NPM
$ npm run codegen

# Yarn
$ yarn codegen
```

- Add your Access token and deploy your subgraph. The access token is found on your dashboard in the Hosted Service.

```sh
$ graph auth --product hosted-service <ACCESS_TOKEN>
$ graph deploy --product hosted-service <GITHUB_USER>/<SUBGRAPH NAME>
```

### 5. Check your logs

The logs should tell you if there are any errors. If your subgraph is failing, you can query the subgraph health by using the [GraphiQL Playground](https://graphiql-online.com/). Use [this endpoint](https://api.thegraph.com/index-node/graphql). Note that you can leverage the query below and input your deployment ID for your subgraph. In this case, `Qm...` is the deployment ID (which can be located on the Subgraph page under **Details**). The query below will tell you when a subgraph fails so you can debug accordingly:

```sh
{
  indexingStatuses(subgraphs: ["Qm..."]) {
    node
    synced
    health
    fatalError {
      message
      block {
        number
        hash
      }
      handler
    }
    nonFatalErrors {
      message
      block {
        number
        hash
      }
      handler
    }
    chains {
      network
      chainHeadBlock {
        number
      }
      earliestBlock {
        number
      }
      latestBlock {
        number
      }
      lastHealthyBlock {
        number
      }
    }
    entityCount
  }
}
```

### 6. Query your Subgraph

Follow [these instructions](/hosted-service/query-hosted-service) to query your subgraph on the Hosted Service.
