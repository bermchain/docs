---
title: ホステッドサービスとは？
---

このセクションでは、サブグラフを[ホステッドサービス](https://thegraph.com/hosted-service/)にデプロイする方法を説明します。注意点として、ホステッドサービスはすぐには終了しません。非中央集権的なネットワークと同等の機能を持つようになったら、徐々にサービスを終了させていく予定です。ホステッドサービスにデプロイされたサブグラフは、引き続き[こちら](https://thegraph.com/hosted-service/)でご利用いただけます。

ホステッドサービスのアカウントをお持ちでない方は、Githubアカウントでサインアップできます。認証が完了すると、UIを使ってサブグラフを作成し、端末からデプロイすることができます。Graph Nodeは、mainnetに加えて、多数のEthereumテストネット（Rinkeby、Ropsten、Kovan）をサポートしています。

## サブグラフの作成

まず[こちら](/developer/define-subgraph-hosted)の指示に従って、Graph CLIをインストールします。`graph init --product hosted service`を渡してサブグラフを作成します。

### 既存のコントラクトから

すでにEthereum mainnetやテストネットの1つにスマートコントラクトをデプロイしている場合、このコントラクトから新しいサブグラフをブートストラップすることは、Hosted Serviceを始めるのに良い方法です。

このコマンドを使用して、既存のコントラクトからすべてのイベントにインデックスを付けるサブグラフを作成できます。これは、[Etherscan](https://etherscan.io/)からコントラクトABIをフェッチしようとします。

```sh
graph init \
  --product hosted-service
  --from-contract <CONTRACT_ADDRESS> \
  <GITHUB_USER>/<SUBGRAPH_NAME> [<DIRECTORY>]
```

さらに、以下のオプション引数を使用することもできます。ABIがEtherscanから取得できない場合は、ローカルファイルのパスを要求するようにフォールバックします。コマンドにオプション引数がない場合は、対話形式になります。

```sh
--network <ETHEREUM_NETWORK> \
--abi <FILE> \
```

ここでの`<GITHUB_USER>`はgithubのユーザー名または組織名、`<SUBGRAPH_NAME>`はサブグラフの名前、`<DIRECTORY>`はgraph initがサンプルサブグラフのマニフェストを置くディレクトリのオプション名です。`<CONTRACT_ADDRESS>`は既存のコントラクトのアドレスです。`<ETHEREUM_NETWORK>`はコントラクトが住んでいるEthereumネットワークの名前です。`<FILE>`はコントラクトのABIファイルへのローカルパスです。**--networkと--abiはどちらもオプションです。**

### サブグラフの例から

`graph init`がサポートする2つ目のモードは、例となるサブグラフから新しいプロジェクトを作成することです。以下のコマンドがこれを行います:

```
graph init --from-example --product hosted-service <GITHUB_USER>/<SUBGRAPH_NAME> [<DIRECTORY>]
```

サンプルのサブグラフは、Dani GrantによるGravityコントラクトをベースにしています。このコントラクトは、ユーザーのアバターを管理し、アバターが作成または更新されるたびに`NewGravatar`または`UpdateGravatar`イベントを発行します。サブグラフは、`Gravatar`エンティティをグラフノードストアに書き込み、イベントに応じてこれらが更新されるようにすることで、これらのイベントを処理します。[subgraph manifest](/developer/create-subgraph-hosted#the-subgraph-manifest)を見ると、スマートコントラクトからどのイベントに注意を払うべきか、マッピングなどがよくわかります。

## ホステッドサービスでサポートされているネットワーク

ホステッドサービスでサポートされているネットワークは以下の通りです。なお、Ethereumメインネット（以下、メインネット）以外のネットワークは、現在[The Graph Explorer](https://thegraph.com/explorer)ではサポートされていません。

- `メインネット`
- `kovan`
- `rinkeby`
- `ropsten`
- `goerli`
- `poa-core`
- `poa-sokol`
- `xdai`
- `near-mainnet`
- `near-testnet`
- `matic`
- `mumbai`
- `fantom`
- `bsc`
- `chapel`
- `clover`
- `avalanche`
- `fuji`
- `celo`
- `celo-alfajores`
- `fuse`
- `moonriver`
- `mbase`
- `arbitrum-one`
- `arbitrum-rinkeby`
- `optimism`
- `optimism-kovan`
- `aurora`
- `aurora-testnet`
