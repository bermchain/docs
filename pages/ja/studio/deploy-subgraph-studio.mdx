---
title: Subgraph Studioへのサブグラフのデプロイ
---

Subgraph Studioへのサブグラフのデプロイメントは非常に簡単です。ここでは、以下の手順を説明します:

- Graph CLIをインストールする（yarnとnpmの両方で）
- Subgraph Studioでサブグラフを作成する
- CLIから自分のアカウントを認証する
- Subgraph Studioにサブグラフをデプロイする

## Graph CLIのインストール

ホステッドサービス[hosted service](https://thegraph.com/hosted-service/)へのサブグラフのデプロイと、[Subgraph Studio](https://thegraph.com/studio/)へのサブグラフのデプロイに、同じCLIを使用しています。以下は、graph-cliをインストールするためのコマンドです。これは、npmまたはyarnを使って行うことができます。

**yarnでインストールします:**

```bash
yarn global add @graphprotocol/graph-cli
```

**npmでインストールします:**

```bash
npm install -g @graphprotocol/graph-cli
```

## Subgraph Studioでサブグラフを作成する

実際のサブグラフをデプロイする前に、[Subgraph Studio](https://thegraph.com/studio/)でサブグラフを作成する必要があります。詳しくは、[Studio documentation](/studio/subgraph-studio)をお読みになることをお勧めします。

## サブグラフの初期化

Subgraph Studioでサブグラフが作成されると、以下のコマンドでサブグラフのコードを初期化することができます:

```bash
graph init --studio <SUBGRAPH_SLUG>
```

`<SUBGRAPH_SLUG>`の値は、Subgraph Studioのサブグラフの詳細ページにあります:

![Subgraph Studio - Slug](/img/doc-subgraph-slug.png)

`graph init`を実行すると、クエリしたいコントラクトアドレス、ネットワーク、Abiの入力を求められます。これを行うと、サブグラフの作業を開始するためのいくつかの基本的なコードを含む新しいフォルダがローカルマシン上に生成されます。その後、サブグラフが期待通りに動作することを確認するために、サブグラフを最終的に完成させることができます。

## グラフ認証

Subgraph Studioにサブグラフをデプロイする前に、CLIで自分のアカウントにログインする必要があります。これを行うには、"My Subgraphs "ページまたはサブグラフの詳細ページにあるdeploy keyが必要になります。

以下は、CLIから認証を行うために必要なコマンドです:

```bash
graph auth --studio graph auth --studio <DEPLOY KEY>」
```

## Subgraph Studioへのサブグラフのデプロイ

準備ができたら、Subgraph Studioにサブグラフをデプロイすることができます。これを行うと、分散型ネットワークにサブグラフが公開されず、テストやメタデータの更新が可能なStudioアカウントにのみデプロイされます。

以下は、サブグラフのデプロイに必要なCLIコマンドです。

```bash
graph deploy --studio <SUBGRAPH_SLUG>
```

このコマンドを実行すると、CLIがバージョンラベルの入力を求めてきますので、`0.1`や`0.2`といったラベルを使ったり、`uniswap-v2-0.1`のようにアルファベットを使ったりと、好きなように名前を付けることができます。これらのラベルはグラフエクスプローラーに表示され、キュレーターがこのバージョンにシグナルを送りたいかどうかを判断するのに使われますので、賢く選択しましょう。

デプロイされた後は、Subgraph Studioでプレイグラウンドを使ってサブグラフをテストし、必要に応じて別のバージョンをデプロイし、メタデータを更新し、準備ができたらGraph Explorerにサブグラフを公開することができます。
